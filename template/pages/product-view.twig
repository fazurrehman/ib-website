{% extends "../layouts/default.twig" %}
{% set pageClass = "page-product" %}
{% set pageTitle = "Product Page" %}


{% block content %}
<div class="ib-productpage">
  <div class="ib-context">
    <div class="ib-productpage__viewer">
      <div class="ib-productpage__viewer-desktop">
        <div class="ib-productpage-media">
          <img alt="A lazy image" class="lazy ib-image-full" data-src="https://www.icebox.com/unsafe/800x600/icebox-jewelry.s3.amazonaws.com/products/42a1c458e6cad5550911f3154bc53cbb.jpg" />
        </div>
        <div class="ib-productpage-media">
          <img alt="A lazy image" class="lazy ib-image-full" data-src="https://www.icebox.com/unsafe/800x600/icebox-jewelry.s3.amazonaws.com/products/0b475508a2e0868ff19ada157df6c776.jpg" />
        </div>
        <div class="ib-productpage-media">
          <img alt="A lazy image" class="lazy ib-image-full" data-src="https://www.icebox.com/unsafe/800x600/icebox-jewelry.s3.amazonaws.com/products/704180eb6d177d61f4f2d72569a33e30.jpg" />
        </div>
        <div class="ib-productpage-media">
          <img alt="A lazy image" class="lazy ib-image-full" data-src="https://www.icebox.com/unsafe/800x600/icebox-jewelry.s3.amazonaws.com/products/4e7607bdc38aa8255c3fe0e166ac5eb8.jpg" />
        </div>
      </div>
      <!-- desktiop -->
      <div class="ib-productpage__viewer-mobile">
        <div class="ib-product-title-group ib-product-title-group--mobile">
          <h1 class="ib-product-title h2 medium">Two row Baguette Jagged Cuban Ring</h1>
          <span class="ib-product-pricing body bold">$ 48000</span>
        </div>
        <div class="ib-product-carousel carousel-main" data-flickity>
          <div class="carousel-cell">
              <img src="https://www.icebox.com/unsafe/800x600/icebox-jewelry.s3.amazonaws.com/products/42a1c458e6cad5550911f3154bc53cbb.jpg"
                   alt="image" class="ib-image-full"
              />
          </div>
          <div class="carousel-cell">
            <img src="https://www.icebox.com/unsafe/800x600/icebox-jewelry.s3.amazonaws.com/products/0b475508a2e0868ff19ada157df6c776.jpg"
                 alt="image" class=" ib-image-full"
            />
          </div>
          <div class="carousel-cell">
            <img src="https://www.icebox.com/unsafe/800x600/icebox-jewelry.s3.amazonaws.com/products/704180eb6d177d61f4f2d72569a33e30.jpg"
                 alt="image" class=" ib-image-full"
            />
          </div>
          <div class="carousel-cell">
            <img src="https://www.icebox.com/unsafe/800x600/icebox-jewelry.s3.amazonaws.com/products/4e7607bdc38aa8255c3fe0e166ac5eb8.jpg"
                 alt="image" class=" ib-image-full"
            />
          </div>
          <div class="carousel-cell">
            <img src="https://www.icebox.com/unsafe/800x600/icebox-jewelry.s3.amazonaws.com/products/4e7607bdc38aa8255c3fe0e166ac5eb8.jpg"
                 alt="image" class=" ib-image-full"
            />
          </div>
          <div class="carousel-cell">
            <img src="https://www.icebox.com/unsafe/800x600/icebox-jewelry.s3.amazonaws.com/products/4e7607bdc38aa8255c3fe0e166ac5eb8.jpg"
                 alt="image" class=" ib-image-full"
            />
          </div>
          <div class="carousel-cell">
            <img src="https://www.icebox.com/unsafe/800x600/icebox-jewelry.s3.amazonaws.com/products/4e7607bdc38aa8255c3fe0e166ac5eb8.jpg"
                 alt="image" class=" ib-image-full"
            />
          </div>
          <div class="carousel-cell">
            <img src="https://www.icebox.com/unsafe/800x600/icebox-jewelry.s3.amazonaws.com/products/4e7607bdc38aa8255c3fe0e166ac5eb8.jpg"
                 alt="image" class=" ib-image-full"
            />
          </div>


        </div>
        <div class="carousel carousel-nav"
             data-flickity='{ "asNavFor": ".carousel-main", "contain": true, "pageDots": true, "prevNextButtons": false, "cellAlign": "left" }'>
          <div class="carousel-cell">
            <img src="https://www.icebox.com/unsafe/100x100/icebox-jewelry.s3.amazonaws.com/products/42a1c458e6cad5550911f3154bc53cbb.jpg" class="ib-image-full" alt="orange tree" />
          </div>
          <div class="carousel-cell">
            <img src="https://www.icebox.com/unsafe/100x100/icebox-jewelry.s3.amazonaws.com/products/0b475508a2e0868ff19ada157df6c776.jpg" class="ib-image-full" alt="One World Trade" />
          </div>
          <div class="carousel-cell">
            <img src="https://www.icebox.com/unsafe/100x100/icebox-jewelry.s3.amazonaws.com/products/704180eb6d177d61f4f2d72569a33e30.jpg" class="ib-image-full" alt="drizzle" />
          </div>
          <div class="carousel-cell">
            <img src="https://www.icebox.com/unsafe/100x100/icebox-jewelry.s3.amazonaws.com/products/4e7607bdc38aa8255c3fe0e166ac5eb8.jpg" class="ib-image-full" alt="cat nose" />
          </div>
          <div class="carousel-cell">
            <img src="https://www.icebox.com/unsafe/100x100/icebox-jewelry.s3.amazonaws.com/products/4e7607bdc38aa8255c3fe0e166ac5eb8.jpg" class="ib-image-full" alt="cat nose" />
          </div>
          <div class="carousel-cell">
            <img src="https://www.icebox.com/unsafe/100x100/icebox-jewelry.s3.amazonaws.com/products/4e7607bdc38aa8255c3fe0e166ac5eb8.jpg" class="ib-image-full" alt="cat nose" />
          </div>
          <div class="carousel-cell">
            <img src="https://www.icebox.com/unsafe/100x100/icebox-jewelry.s3.amazonaws.com/products/4e7607bdc38aa8255c3fe0e166ac5eb8.jpg" class="ib-image-full" alt="cat nose" />
          </div>
          <div class="carousel-cell">
            <img src="https://www.icebox.com/unsafe/100x100/icebox-jewelry.s3.amazonaws.com/products/4e7607bdc38aa8255c3fe0e166ac5eb8.jpg" class="ib-image-full" alt="cat nose" />
          </div>
        </div>

      </div>
      <!-- mobile -->
      <div class="ib-productpage-fixed-content moveMeIntoSidebar" id="moveMeIntoSidebar">
        <div class="ib-productpage-promises">
          <div class="ib-productpage-promises__col">
            <svg class="svgIcon-root">
              <use xlink:href="icons/icons.svg#icon-question"></use>
            </svg>
            <h5 class="meta bold">Have question?</h5>
            <span class="micro">Expert guidance is just a click away.</span>
            <a href="#" class="micro bold link-underline">Ask Question</a>
          </div>
          <div class="ib-productpage-promises__col">
            <svg class="svgIcon-root">
              <use xlink:href="icons/icons.svg#icon-truck"></use>
            </svg>
            <h5 class="meta bold">Fast Shipping</h5>
            <span class="micro">Shop with confidence, all orders ship insured.</span>
            <a href="#" class="micro bold link-underline">Learn More.</a>
          </div>
          <div class="ib-productpage-promises__col">
            <svg class="svgIcon-root">
              <use xlink:href="icons/icons.svg#icon-policy"></use>
            </svg>
            <h5 class="meta bold">Exchange Only Policy</h5>
            <span class="micro">Icebox does not issue refunds, but exchanges are allowed within 3 weeks of purchase.</span>
          </div>
          <div class="ib-productpage-promises__col">
            <svg class="svgIcon-root">
              <use xlink:href="icons/icons.svg#icon-help"></use>
            </svg>
            <h5 class="meta bold">Know more?</h5>
            <span class="micro">Ask anything about our product,weâ€™d love to help you.</span>
            <a href="#" class="micro bold link-underline">Call Us: (770) 828-5540</a>
          </div>
        </div>
        <div class="ib-productpage-product-more">
          <h4>New Arrvials</h4>
        <div class="ib-products-carousel js-products-carousel" data-flickity='{ "contain": true, "pageDots": true, "selectedAttraction": 0.01, "friction": 0.15, "groupCells": true, "groupCells": 2, "cellAlign": "left" }'>
          {% for i in 1..16 %}
            <div class="carousel-cell">
            {% include '../components/productcard-default.twig' with {'objects':i} %}
            </div>
          {% endfor %}
        </div>
        </div>
      </div>
    </div>
    <div class="ib-productpage__sidebar">
      {% include "../pages/comps/productpage-comps.twig" %}
    </div>

  </div>
</div>





{% endblock %}
{% block included_content %}
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="js/productpage-v2.min.js"></script>
<script>
  // sidebar box
  var $el, $ps, $up, totalHeight;
  $(".sidebar-box .button").click(function() {
    totalHeight = 0;
    $el = $(this);
    $p = $el.parent();
    $up = $p.parent();
    $ps = $up.find("p:not('.read-more')");

    // measure how tall inside should be by adding together heights of all inside paragraphs (except read-more paragraph)
    $ps.each(function() {
      totalHeight += $(this).outerHeight();
    });
    $up
      .css({
        // Set height to prevent instant jumpdown when max height is removed
        height: $up.height(),
        "max-height": 9999,
      })
      .animate({
        height: totalHeight,
      });

    // fade out read-more
    $p.fadeOut();

    // prevent jump-down
    return false;
  });

  // tooltips
  $(function() {
    var targets = $('[id~=ib-tooltip]'),
      target = false,
      tooltip = false,
      title = false;

    targets.bind('mouseenter', function() {
      target = $(this);
      tip = target.attr('title');
      tooltip = $('<div id="tooltip"></div>');

      if (!tip || tip == '')
        return false;

      target.removeAttr('title');
      tooltip.css('opacity', 0)
        .html(tip)
        .appendTo('body');

      var init_tooltip = function() {
        if ($(window).width() < tooltip.outerWidth() * 1.5)
          tooltip.css('max-width', $(window).width() / 2);
        else
          tooltip.css('max-width', 340);

        var pos_left = target.offset().left + (target.outerWidth() / 2) - (tooltip.outerWidth() / 2),
          pos_top = target.offset().top - tooltip.outerHeight() - 20;

        if (pos_left < 0) {
          pos_left = target.offset().left + target.outerWidth() / 2 - 20;
          tooltip.addClass('left');
        } else
          tooltip.removeClass('left');

        if (pos_left + tooltip.outerWidth() > $(window).width()) {
          pos_left = target.offset().left - tooltip.outerWidth() + target.outerWidth() / 2 + 20;
          tooltip.addClass('right');
        } else
          tooltip.removeClass('right');

        if (pos_top < 0) {
          var pos_top = target.offset().top + target.outerHeight();
          tooltip.addClass('top');
        } else
          tooltip.removeClass('top');

        tooltip.css({
            left: pos_left,
            top: pos_top
          })
          .animate({
            top: '+=10',
            opacity: 1
          }, 50);
      };

      init_tooltip();
      $(window).resize(init_tooltip);

      var remove_tooltip = function() {
        tooltip.animate({
          top: '-=10',
          opacity: 0
        }, 50, function() {
          $(this).remove();
        });

        target.attr('title', tip);
      };

      target.bind('mouseleave', remove_tooltip);
      tooltip.bind('click', remove_tooltip);
    });
  });
</script>
  <script>
    $(document).ready(function (){
      if (window.matchMedia('(max-width: 960px)').matches) {
        $("#moveMeIntoSidebar").appendTo($(".ib-productpage__sidebar"));
        console.log('moved down on mobile')
      } else{
        $("#moveMeIntoSidebar").appendTo($(".ib-productpage__viewer"));
        console.log('moved down on desktop')
      }
    })

  </script>
{% endblock %}
